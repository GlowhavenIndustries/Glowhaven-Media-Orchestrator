<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spotify Playlist Exporter</title>
  <meta name="description" content="Export Spotify playlists into analytics-ready CSV files with a premium, enterprise-quality interface." />
  <meta name="theme-color" content="#0b0e14" />
  <link rel="icon" href="https://open.spotifycdn.com/cdn/images/favicon32.b64ecc03.png" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
  <div class="page">
    <a class="skip-link" href="#main">Skip to content</a>
    <nav class="navbar">
      <div class="container d-flex align-items-center justify-content-between">
        <a class="navbar-brand" href="#">Spotify Playlist Exporter</a>
        <div class="nav-actions">
          <span class="tag">Enterprise-grade CSV exports</span>
          <a class="nav-link" href="#how-it-works">How it works</a>
        </div>
      </div>
    </nav>

    <main id="main" class="container">
      <section class="hero">
        <div class="row g-4 align-items-center">
          <div class="col-lg-6">
            <span class="pill">Trusted by data-driven teams</span>
            <h1>Export Spotify playlists into analytics-ready CSV files.</h1>
            <p>
              Built for teams who need reliable playlist data in seconds. Paste a playlist URL and get structured CSV output
              with track numbers, durations, and timestamps â€” ready for spreadsheets, BI tools, or automation.
            </p>
            <div class="stats">
              <div class="stat-card">
                <h3>99.9%</h3>
                <span>API compatibility & resilience</span>
              </div>
              <div class="stat-card">
                <h3>{{ csv_fields|length }}</h3>
                <span>Data columns exported</span>
              </div>
              <div class="stat-card">
                <h3>Secure</h3>
                <span>Credentials stay on your machine</span>
              </div>
            </div>
            <div class="trust-row">
              <span class="trust-item">SOC 2 ready workflows</span>
              <span class="trust-item">Zero data retention</span>
              <span class="trust-item">CSV + UTF-8</span>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="export-card">
              <h2 class="h4 mb-3">Start an export</h2>
              <p class="text-muted mb-4">
                Enter the Spotify playlist URL. We'll validate it, fetch data, and prepare your CSV.
              </p>
              <form id="exportForm" method="POST" action="/">
                <div class="mb-3">
                  <label class="form-label" for="playlistUrl">Spotify playlist URL</label>
                  <input
                    type="url"
                    class="form-control"
                    id="playlistUrl"
                    name="playlist_url"
                    placeholder="https://open.spotify.com/playlist/..."
                    required
                    aria-describedby="playlistHelp"
                  />
                  <div id="playlistHelp" class="form-help">We accept open.spotify.com links and spotify:playlist URIs.</div>
                </div>
                <button id="submitButton" type="submit" class="btn btn-primary w-100">Export to CSV</button>
              </form>

              <div class="mt-4 d-flex align-items-center gap-3">
                <div id="loader" class="loader d-none" aria-live="polite" role="status" aria-label="Loading"></div>
                <div class="export-meta" id="exportMeta">
                  <span>Includes: {{ csv_fields|join(", ") }}</span>
                </div>
              </div>

              <div id="exportResult" class="mt-4 d-none">
                <h3 class="h6 mb-2">CSV preview</h3>
                <div id="csvPreview" class="export-preview"></div>
              </div>

              <div id="exportMessage" class="mt-3 d-none" role="status" aria-live="polite"></div>
              <div class="export-footnote">
                By exporting, you confirm you have access to the playlist and agree to Spotify's terms.
              </div>

              {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                  <div class="mt-4">
                    {% for category, message in messages %}
                      <div class="flash-message" role="alert">
                        {{ message }}
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              {% endwith %}
            </div>
          </div>
        </div>
      </section>

      <section id="how-it-works" class="glass-panel mb-5">
        <div class="row g-4">
          <div class="col-lg-5">
            <h2 class="h4 mb-3">How it works</h2>
            <p class="text-muted">
              Designed for speed, clarity, and compliance. Export data in three simple steps.
            </p>
            <div class="steps">
              <div class="step-card">
                <div class="step-badge">1</div>
                <div>
                  <h4 class="h6">Paste the playlist URL</h4>
                  <p class="text-muted mb-0">We support standard Spotify playlist links and URIs.</p>
                </div>
              </div>
              <div class="step-card">
                <div class="step-badge">2</div>
                <div>
                  <h4 class="h6">We fetch track metadata</h4>
                  <p class="text-muted mb-0">All tracks, artists, and durations are gathered automatically.</p>
                </div>
              </div>
              <div class="step-card">
                <div class="step-badge">3</div>
                <div>
                  <h4 class="h6">Download your CSV</h4>
                  <p class="text-muted mb-0">Instant download plus an on-screen preview.</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-7">
            <h2 class="h4 mb-3">Why teams choose this exporter</h2>
            <div class="feature-list">
              <div class="feature-card">
                <h4>Analytics-ready data</h4>
                <p>Track numbers, durations, and timestamps give you complete context for reporting.</p>
              </div>
              <div class="feature-card">
                <h4>Resilient API handling</h4>
                <p>Pagination and error handling keep exports reliable even on large playlists.</p>
              </div>
              <div class="feature-card">
                <h4>Privacy-first workflow</h4>
                <p>Credentials stay local and are never stored in the app or database.</p>
              </div>
              <div class="feature-card">
                <h4>Modern UI system</h4>
                <p>Accessible typography, gradients, and clear calls-to-action across devices.</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container d-flex flex-column flex-md-row justify-content-between gap-3">
        <span>Built with Flask, Spotipy, and modern UX principles.</span>
        <span>Need help? Review the README for setup and usage.</span>
      </div>
    </footer>
  </div>

  <noscript>
    <div class="noscript-warning">
      JavaScript is required to export playlists. Please enable JavaScript and refresh the page.
    </div>
  </noscript>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="{{ url_for('static', filename='app.js') }}" defer></script>
</body>
</html>
